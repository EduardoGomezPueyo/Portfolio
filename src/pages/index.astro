---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/Hero.astro';
import CaseStudyCard from '../components/CaseStudyCard.astro';
import { useTranslations } from '../i18n/utils';
import { getCollection } from 'astro:content';

const lang = 'en';
const t = useTranslations(lang);

const caseStudies = (await getCollection('case-studies'))
  .filter((study) => study.data.lang === lang)
  .sort((a, b) => a.data.order - b.data.order);
---

<BaseLayout title={t('meta.title')} description={t('meta.description')} lang={lang}>
  <Hero lang={lang} />

  <section class="pb-24 md:pb-32">
    <div class="max-w-content mx-auto px-6 mb-12">
      <h2 class="font-mono text-sm text-neutral-500 dark:text-neutral-400 uppercase tracking-wider">
        {t('home.selectedWork')}
      </h2>
    </div>

    {caseStudies.map((study, index) => (
      <CaseStudyCard
        title={study.data.title}
        description={study.data.description}
        thumbnail={study.data.thumbnail}
        slug={study.data.slug}
        role={study.data.role}
        lang={lang}
        index={index}
      />
    ))}
  </section>
</BaseLayout>
